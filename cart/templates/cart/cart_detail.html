{% load static %}

<html lang="en">
<head>
</head>
<body>
    <a href="{% url 'catalog:catalog_view' %}"><button>Назад</button></a>
    <h1>Your Shopping Cart</h1>
    <div class="product-list">
    {% for item in cart %}
    <br>
    <div class="product-item">
        <p>{{ item.product.name }} ({{ item.quantity }})</p>
        <p>Price: ${{ item.product.price }}</p>
        <p>
            <a href="{% url 'cart:cart_add_one' pk=item.product.pk %}"><button>+</button></a>
            <a href="{% url 'cart:cart_remove_one' pk=item.product.pk %}"><button>-</button></a>
        </p>
        <p><a href="{% url 'cart:cart_remove' pk=item.product.pk %}"><button>Удалить</button></a></p>
    </div>
    {% empty %}
    <p>Your cart is empty.</p>
    {% endfor %}

        {% if cart.coupon %}
        <tr class="subtotal">
            <td>Subtotal</td>
            <td colspan="4"></td>
            <td class="num">${{ cart.get_total_price }}</td>
        </tr>
        <tr>
            <td>
                "{{ cart.coupon.code }}" coupon
                ({{ cart.coupon.discount }}% off)
            </td>
            <td colspan="4"></td>
            <td class="num neg">
                - ${{ cart.get_discount|floatformat:"2" }}
            </td>
        </tr>
        {% endif %}
        <tr class="total">
            <td>Total</td>
            <td colspan="4"></td>
            <td class="num">
                ${{ cart.get_total_price_after_discount|floatformat:"2" }}
            </td>
        </tr>

        <form action="{% url 'coupon:apply' %}" method="post">
            {{ coupon_apply_form }}
            <input type="submit" value="Apply">
            {% csrf_token %}
        </form>

    </div>
    <br>
    <p>Total Price: ${{ cart.get_total_price }}</p>
    <br>
    <a href="{% url 'order:create_order' %}"><button>Place order</button></a>

</body>
</html>

